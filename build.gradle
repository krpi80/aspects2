group 'com.kfpi.aspects'
version '1.0-SNAPSHOT'

apply plugin: 'groovy'
apply plugin: 'java'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

configurations {
    weaver
}

ext {
    aspectjVersion = '1.8.10'
}

dependencies {
    compile group: 'org.aspectj', name: 'aspectjrt', version: aspectjVersion
    weaver group: 'org.aspectj', name: 'aspectjweaver', version: aspectjVersion // see jvmArgs below

    compile 'org.codehaus.groovy:groovy-all:2.3.11'
    testCompile group: 'junit', name: 'junit', version: '4.11'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

test {
    jvmArgs "-javaagent:$configurations.weaver.asPath"

    doLast {
        println 'When running tests from IDE make sure to add these jvm args to your launch configuration:'
        println jvmArgs.join(' ')
    }
}
